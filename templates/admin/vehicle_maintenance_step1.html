{% load static %}















<!doctype html>















<html lang="es">







  <head>







    <meta charset="utf-8">







    <meta name="viewport" content="width=device-width, initial-scale=1">







    <title>Paso 1 ÃÃ· Agendamiento | VyC IngenierÃ­a</title>







    <link rel="stylesheet" href="{% static 'css/theme.css' %}">







    <script src="https://cdn.tailwindcss.com"></script>







    <style>







      :root { color-scheme: dark; }







      body::before {







        content: "";







        position: fixed;







        inset: 0;







        pointer-events: none;







        background-image: url("https://www.transparenttextures.com/patterns/stardust.png");







        mix-blend-mode: screen;







        opacity: 0.18;







        filter: brightness(1.7);







      }















      .btn-icon {







        display: inline-flex;







        align-items: center;







        justify-content: center;







        transition: transform 0.25s ease;







      }















      .btn-icon--active {







        transform: translateY(-1px) scale(1.15);







      }















      .calendar-day {







        position: relative;







        border-radius: 12px;







        width: 100%;







        padding: 0.75rem 0;







        background: transparent;







        border: 1px solid transparent;







        transition: all 0.2s ease;







      }















      .calendar-day--available {







        border-color: rgba(103, 232, 249, 0.35);







        background: rgba(8, 48, 105, 0.35);







      }















      .calendar-day--available:hover {







        border-color: rgba(250, 204, 21, 0.55);







        background: rgba(13, 148, 136, 0.35);







      }















      .calendar-day--selected {







        border-color: rgba(250, 204, 21, 0.95);







        background: rgba(250, 204, 21, 0.18);







        box-shadow: 0 0 12px rgba(250, 204, 21, 0.4);







        color: #fefce8;







      }















      .calendar-day--disabled {







        opacity: 0.35;







        cursor: not-allowed;







      }















      .calendar-day--holiday {







        opacity: 0.5;







        cursor: not-allowed;







        color: rgb(248, 113, 113);







        border-color: rgba(239, 68, 68, 0.45);







      }







    </style>







  </head>







  <body class="min-h-screen bg-gradient-to-br from-[#001b4e] via-[#001133] to-[#04091f] text-cyan-50">







    <div class="relative flex min-h-screen overflow-x-hidden">







      <div class="pointer-events-none absolute inset-0 opacity-60 mix-blend-screen">







        <div class="absolute -top-28 right-[15%] h-72 w-72 rounded-full bg-cyan-400/25 blur-[140px]"></div>







        <div class="absolute bottom-[-22%] left-[12%] h-96 w-96 rounded-full bg-amber-300/18 blur-[180px]"></div>







      </div>















      <aside class="sticky top-0 flex h-screen w-72 flex-shrink-0 flex-col border-r border-cyan-400/20 bg-gradient-to-b from-[#071a4c]/96 via-[#051433]/94 to-[#04091f]/98">







        <div class="border-b border-cyan-400/15 px-6 py-8">







          <div class="inline-flex items-center gap-3 rounded-full border border-cyan-300/40 bg-cyan-500/10 px-4 py-1 text-[0.65rem] font-semibold uppercase tracking-[0.35em] text-cyan-100/90">







            <span class="h-1.5 w-1.5 rounded-full bg-amber-300 shadow-[0_0_12px_rgba(250,204,21,0.8)]"></span>







            VyC IngenierÃ­a







          </div>







          <h1 class="mt-4 bg-gradient-to-r from-amber-200 via-amber-300 to-amber-100 bg-clip-text text-2xl font-extrabold text-transparent drop-shadow-[0_0_14px_rgba(250,204,21,0.35)]">







            {{ module_name }}







          </h1>







          <p class="mt-2 text-sm text-cyan-100/80">







            {{ module_summary }}







          </p>







        </div>















        <nav class="flex-1 overflow-y-auto px-6 py-6">







          <p class="text-[0.70rem] font-semibold uppercase tracking-[0.35em] text-cyan-100/60">







            Operaciones







          </p>







          <div class="mt-4 space-y-4">







            <a







              href="{% url 'vehicle-maintenance-step1' %}"







              class="btn-3d w-full px-4 py-2 text-left flex flex-col gap-1 rounded-lg items-start border border-amber-300/50 bg-gradient-to-br from-[#183d7a] via-[#0d2f63] to-[#081e45] text-cyan-50 ring-2 ring-amber-300/40"







            >







              <span class="text-[0.64rem] uppercase tracking-[0.25em] text-amber-200/80">Paso 1</span>







              <span class="text-[0.82rem] font-semibold uppercase tracking-wide leading-tight">Agendamiento</span>







            </a>







            <a







              href="#"







              class="btn-3d w-full px-4 py-2 text-left flex flex-col gap-1 rounded-lg items-start bg-gradient-to-br from-[#062b73] via-[#083069] to-[#0a2150] text-cyan-50/90"







            >







              <span class="text-[0.64rem] uppercase tracking-[0.25em] text-cyan-100/80">Paso 2</span>







              <span class="text-[0.82rem] font-semibold text-cyan-50 uppercase tracking-wide leading-tight">Recepción & Diagnóstico</span>







            </a>







            <a







              href="#"







              class="btn-3d w-full px-4 py-2 text-left flex flex-col gap-1 rounded-lg items-start bg-gradient-to-br from-[#062b73] via-[#083069] to-[#0a2150] text-cyan-50/90"







            >







              <span class="text-[0.64rem] uppercase tracking-[0.25em] text-cyan-100/80">Paso 3</span>







              <span class="text-[0.82rem] font-semibold text-cyan-50 uppercase tracking-wide leading-tight">Presupuesto</span>







            </a>







            <a







              href="#"







              class="btn-3d w-full px-4 py-2 text-left flex flex-col gap-1 rounded-lg items-start bg-gradient-to-br from-[#062b73] via-[#083069] to-[#0a2150] text-cyan-50/90"







            >







              <span class="text-[0.64rem] uppercase tracking-[0.25em] text-cyan-100/80">Paso 4</span>







              <span class="text-[0.82rem] font-semibold text-cyan-50 uppercase tracking-wide leading-tight">Reparación</span>







            </a>







            <a







              href="#"







              class="btn-3d w-full px-4 py-2 text-left flex flex-col gap-1 rounded-lg items-start bg-gradient-to-br from-[#062b73] via-[#083069] to-[#0a2150] text-cyan-50/90"







            >







              <span class="text-[0.64rem] uppercase tracking-[0.25em] text-cyan-100/80">Paso 5</span>







              <span class="text-[0.82rem] font-semibold text-cyan-50 uppercase tracking-wide leading-tight">Pago</span>







            </a>







            <a







              href="#"







              class="btn-3d w-full px-4 py-2 text-left flex flex-col gap-1 rounded-lg items-start bg-gradient-to-br from-[#062b73] via-[#083069] to-[#0a2150] text-cyan-50/90"







            >







              <span class="text-[0.64rem] uppercase tracking-[0.25em] text-cyan-100/80">Paso 6</span>







              <span class="text-[0.82rem] font-semibold text-cyan-50 uppercase tracking-wide leading-tight">Entrega</span>







            </a>







          </div>







        </nav>















        <div class="px-6 pb-8">







          <a







            href="{% url 'vehicle-maintenance' %}"







            class="btn-3d w-full text-xs uppercase px-4 py-3 inline-flex items-center justify-center gap-2 mb-4 tracking-wide"







          >







            <span class="btn-icon" aria-hidden="true" data-icon-default="&#x1F3E0;" data-icon-active="&#x1F3E1;">&#x1F3E0;</span>







            <span>Volver al Módulo</span>







          </a>







          <form method="post" action="{% url 'logout' %}">







            {% csrf_token %}







            <button type="submit" class="btn-3d w-full text-xs inline-flex items-center justify-center gap-2">







              <span class="btn-icon" aria-hidden="true" data-icon-default="&#x1F6AA;" data-icon-active="&#x1F6AA;">&#x1F6AA;</span>







              <span>Salir</span>







            </button>







          </form>







        </div>







      </aside>















      <main class="relative flex-1 px-6 py-8 md:px-10 lg:px-16">







        <section id="agendamiento" class="relative z-10">







          <div class="mx-auto max-w-6xl space-y-10">







            <header class="space-y-2 text-center">







              <span class="inline-flex items-center gap-2 rounded-full border border-cyan-300/35 bg-cyan-500/10 px-4 py-1 text-[0.65rem] font-semibold uppercase tracking-[0.35em] text-cyan-100/80">







                <span class="h-1.5 w-1.5 rounded-full bg-amber-300 shadow-[0_0_12px_rgba(250,204,21,0.8)]"></span>







                Paso 1 ÃÃ· Agendamiento







              </span>







              <h2 class="bg-gradient-to-r from-amber-200 via-amber-300 to-amber-100 bg-clip-text text-3xl font-bold text-transparent drop-shadow-[0_0_14px_rgba(250,204,21,0.3)] md:text-4xl">







                Programación de visita







              </h2>







              <p class="mx-auto max-w-3xl text-sm text-cyan-100/75 md:text-base">







                Visualiza la disponibilidad mensual y registra la hora de atención preferida por el cliente.</p>







            </header>















            <div class="grid gap-6 lg:grid-cols-[1.5fr_1.5fr] xl:grid-cols-[1.4fr_1.6fr]">







              <div class="rounded-2xl border border-cyan-300/25 bg-white/5 p-6 backdrop-blur-xl" data-calendar>







                <div class="flex items-center justify-between">







                  <button







                    type="button"







                    class="rounded-full border border-cyan-300/25 px-3 py-1 text-xs uppercase tracking-[0.3em] text-cyan-100/70 transition hover:border-amber-300/40 hover:text-cyan-50"







                    data-calendar-prev







                  >







                    Anterior







                  </button>







                  <div class="text-center">







                    <p class="text-xs uppercase tracking-[0.35em] text-cyan-100/60">Disponibilidad</p>







                    <h3 class="text-2xl font-semibold text-cyan-50" data-calendar-title></h3>







                  </div>







                  <button







                    type="button"







                    class="rounded-full border border-cyan-300/25 px-3 py-1 text-xs uppercase tracking-[0.3em] text-cyan-100/70 transition hover:border-amber-300/40 hover:text-cyan-50"







                    data-calendar-next







                  >







                    Siguiente







                  </button>







                </div>







                <div class="mt-6 grid grid-cols-7 rounded-xl border border-cyan-300/15 bg-white/5 text-center text-xs uppercase tracking-[0.35em] text-cyan-100/60">







                  <span class="border-b border-cyan-300/10 px-2 py-3">Lun</span>







                  <span class="border-b border-cyan-300/10 px-2 py-3">Mar</span>







                  <span class="border-b border-cyan-300/10 px-2 py-3">Mié</span>







                  <span class="border-b border-cyan-300/10 px-2 py-3">Jue</span>







                  <span class="border-b border-cyan-300/10 px-2 py-3">Vie</span>







                  <span class="border-b border-cyan-300/10 px-2 py-3 text-amber-200/80">Sáb</span>







                  <span class="border-b border-cyan-300/10 px-2 py-3 text-amber-200/80">Dom</span>







                  <div class="calendar-grid col-span-7 grid grid-cols-7 gap-1 p-3 text-sm text-cyan-50" data-calendar-grid></div>







                </div>







                <p class="mt-4 text-xs text-cyan-100/70">







                  * Los círculos resaltados indican cupos disponibles: dos citas por día (09:00 y 15:00) de lunes a viernes.







                </p>







                <p class="mt-2 text-sm text-cyan-100/70">







                  Completa la información para reservar la visita. El responsable del taller validará la cita antes de liberar recursos.







                </p>







              </div>















              <aside class="space-y-6 rounded-2xl border border-cyan-300/25 bg-white/5 p-6 backdrop-blur-xl">







                <div>







                  <h3 class="text-lg font-semibold text-cyan-50">Registrar solicitud</h3>







                </div>







                <form class="space-y-4">







                  <div>







                    <label class="text-xs uppercase tracking-[0.3em] text-cyan-100/60 whitespace-nowrap" for="agenda-client-name">Cliente</label>







                    <input id="agenda-client-name" type="text" placeholder="Ej. Transportes Andina" class="mt-2 w-full rounded-lg min-h-[52px] border flex items-center border-cyan-300/25 bg-[#061736]/80 px-4 py-3 text-sm text-cyan-50 focus:border-amber-300/50 focus:outline-none focus:ring-0">







                  </div>








                  <div class="grid gap-4 md:grid-cols-2">
                    <div>
                      <label class="text-xs uppercase tracking-[0.3em] text-cyan-100/60 whitespace-nowrap" for="agenda-contact">Contacto</label>
                      <input id="agenda-contact" type="tel" placeholder="+56 9 1234 5678" class="mt-1 w-full rounded-lg border border-cyan-300/25 bg-[#061736]/80 px-4 py-3 text-sm text-cyan-50 focus:border-amber-300/50 focus:outline-none focus:ring-0">
                    </div>
                    <div>
                      <label class="text-xs uppercase tracking-[0.3em] text-cyan-100/60" for="agenda-vehicle">Veh&iacute;culo</label>
                      <input id="agenda-vehicle" type="text" placeholder="Patente / Unidad" class="mt-1 w-full rounded-lg border border-cyan-300/25 bg-[#061736]/80 px-4 py-3 text-sm text-cyan-50 focus:border-amber-300/50 focus:outline-none focus:ring-0">
                    </div>
                  </div>







                  <div class="grid gap-4 md:grid-cols-[5fr_minmax(160px,2fr)] items-end">







                    <div>







                      <label class="text-xs uppercase tracking-[0.3em] text-cyan-100/60">Fecha seleccionada</label>







                      <div class="mt-2 rounded-lg min-h-[52px] border border-cyan-300/20 bg-[#04122b]/70 px-4 py-3 text-sm text-cyan-50" data-calendar-selected>







                        Selecciona un día disponible







                      </div>







                    </div>







                    <div>







                      <label class="text-xs uppercase tracking-[0.3em] text-cyan-100/60" for="agenda-time">Hora preferida</label>







                      <select id="agenda-time" class="mt-1 w-full rounded-lg border border-cyan-300/25 bg-[#061736]/80 px-4 py-3 text-sm text-cyan-50 focus:border-amber-300/50 focus:outline-none focus:ring-0">







                        <option value="">Escoge un horario</option>







                        <option value="09:00">09:00</option>







                        <option value="15:00">15:00</option>







                      </select>







                    </div>







                  </div>







                  <div>







                    <label class="text-xs uppercase tracking-[0.3em] text-cyan-100/60" for="agenda-notes">Notas</label>







                    <textarea id="agenda-notes" rows="3" placeholder="Descripción breve de la solicitud" class="mt-1 w-full rounded-lg border border-cyan-300/25 bg-[#061736]/80 px-4 py-3 text-sm text-cyan-50 focus:border-amber-300/50 focus:outline-none focus:ring-0"></textarea>







                  </div>







                  <button type="button" class="btn-3d w-full justify-center px-5 py-3 text-xs uppercase tracking-[0.3em]">







                    Guardar pre-agenda







                  </button>







                </form>







              </aside>







            </div>







          </div>







        </section>















        <div class="relative mt-10 mb-6 flex justify-center">







          <a







            href="{% url 'vehicle-maintenance' %}"







            class="btn-3d inline-flex items-center gap-2 px-6 py-3 text-xs uppercase tracking-[0.3em]"







          >







            <span class="btn-icon" aria-hidden="true" data-icon-default="&#x1F3E0;" data-icon-active="&#x1F3E1;">&#x1F3E0;</span>







            <span>Volver al Módulo</span>







          </a>







        </div>







      </main>







    </div>







    <script>







      document.addEventListener("DOMContentLoaded", () => {







        document.querySelectorAll(".btn-icon[data-icon-active]").forEach((icon) => {







          const trigger = icon.closest("button") || icon.closest("a");







          if (!trigger) return;







          trigger.addEventListener("click", () => {







            icon.textContent = icon.dataset.iconActive;







            icon.classList.add("btn-icon--active");







            setTimeout(() => {







              icon.textContent = icon.dataset.iconDefault;







              icon.classList.remove("btn-icon--active");







            }, 450);







          });







        });















        const calendarRoot = document.querySelector("[data-calendar]");







        if (!calendarRoot) {







          return;







        }















        const grid = calendarRoot.querySelector("[data-calendar-grid]");







        const title = calendarRoot.querySelector("[data-calendar-title]");







        const selected = document.querySelector("[data-calendar-selected]");







        const prevBtn = calendarRoot.querySelector("[data-calendar-prev]");







        const nextBtn = calendarRoot.querySelector("[data-calendar-next]");







        const now = new Date();







        const today = new Date(now);







        today.setHours(0, 0, 0, 0);







        const cutoffToday = new Date(today);







        cutoffToday.setHours(15, 0, 0, 0);















        const RECURRING_HOLIDAYS = new Set([







          "01-01",







          "10-31",







          "11-01",







          "11-16",







          "12-08",







          "12-14",







          "12-25",







        ]);















        let currentMonth = new Date(today);







        currentMonth.setDate(1);







        let chosenDate = null;















        const monthFormatter = new Intl.DateTimeFormat("es", {







          month: "long",







          year: "numeric",







        });







        const dayFormatter = new Intl.DateTimeFormat("es", {







          weekday: "long",







          day: "numeric",







          month: "long",







        });















        function isWeekday(date) {







          const day = date.getDay();







          return day >= 1 && day <= 5;







        }















        function isHoliday(date) {







          const month = String(date.getMonth() + 1).padStart(2, "0");







          const day = String(date.getDate()).padStart(2, "0");







          return RECURRING_HOLIDAYS.has(`${month}-${day}`);







        }















        function renderCalendar() {







          title.textContent = capitalize(monthFormatter.format(currentMonth));







          grid.innerHTML = "";















          const firstDay = new Date(currentMonth);







          const startOffset = (firstDay.getDay() + 6) % 7;







          const daysInMonth = new Date(currentMonth.getFullYear(), currentMonth.getMonth() + 1, 0).getDate();















          for (let i = 0; i < startOffset; i += 1) {







            const spacer = document.createElement("span");







            spacer.className = "py-3";







            grid.appendChild(spacer);







          }















          for (let day = 1; day <= daysInMonth; day += 1) {







            const date = new Date(currentMonth.getFullYear(), currentMonth.getMonth(), day);







            const button = document.createElement("button");







            button.type = "button";







            button.textContent = String(day);







            button.className = "calendar-day";







            button.dataset.date = date.toISOString();















            const isSameDay = isSameDate(date, today);







            const passedCutoff = isSameDay && now >= cutoffToday;







            const isAvailable = isWeekday(date) && date >= today && !passedCutoff && !isHoliday(date);















            if (isHoliday(date)) {







              button.classList.add("calendar-day--holiday");







              button.disabled = true;







            } else if (isAvailable) {







              button.classList.add("calendar-day--available");







              if (isSameDate(date, new Date())) {







                button.classList.add("ring", "ring-amber-300/60");







              }







              button.addEventListener("click", () => {







                chosenDate = date;







                updateSelection();







              });







            } else {







              button.classList.add("calendar-day--disabled");







              button.disabled = true;







            }















            if (chosenDate && isSameDate(chosenDate, date)) {







              button.classList.add("calendar-day--selected");







            }















            grid.appendChild(button);







          }







        }















        function isSameDate(a, b) {







          return (







            a.getFullYear() === b.getFullYear() &&







            a.getMonth() === b.getMonth() &&







            a.getDate() === b.getDate()







          );







        }















        function updateSelection() {







          grid.querySelectorAll(".calendar-day--selected").forEach((el) => {







            el.classList.remove("calendar-day--selected");







          });







          if (!chosenDate) {







            selected.textContent = "Selecciona un día disponible";







            return;







          }







          grid.querySelectorAll("button.calendar-day").forEach((button) => {







            const iso = button.dataset.date;







            if (!iso) {







              return;







            }







            const date = new Date(iso);







            if (isSameDate(date, chosenDate)) {







              button.classList.add("calendar-day--selected");







            }







          });







          selected.textContent = capitalize(dayFormatter.format(chosenDate));







        }















        function capitalize(text) {







          return text.charAt(0).toUpperCase() + text.slice(1);







        }















        prevBtn.addEventListener("click", () => {







          currentMonth.setMonth(currentMonth.getMonth() - 1);







          chosenDate = null;







          renderCalendar();







          updateSelection();







        });















        nextBtn.addEventListener("click", () => {







          currentMonth.setMonth(currentMonth.getMonth() + 1);







          chosenDate = null;







          renderCalendar();







          updateSelection();







        });















        renderCalendar();







        updateSelection();







      });







    </script>







  </body>







</html>










