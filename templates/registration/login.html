{% load static %}
<!doctype html>
<html lang="es" class="theme-dark">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Ingresar | VyC Ingenier√≠a</title>
    <link rel="stylesheet" href="{% static 'css/theme.css' %}">
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
      /* Variables CSS para temas */
      :root {
        --transition-theme: all 2s cubic-bezier(0.4, 0, 0.2, 1);
      }
      
      /* Tema Oscuro (por defecto) */
      .theme-dark {
        --bg-primary: #001b4e;
        --bg-secondary: #001133;
        --bg-tertiary: #04091f;
        --text-primary: rgb(236, 254, 255);
        --text-secondary: rgba(236, 254, 255, 0.9);
        --text-muted: rgba(236, 254, 255, 0.8);
        --accent-primary: rgb(34, 211, 238);
        --accent-secondary: rgb(250, 204, 21);
        --card-bg: rgba(34, 211, 238, 0.16);
        --card-border: rgba(103, 232, 249, 0.32);
        --form-bg: rgba(17, 24, 39, 0.9);
        --input-bg: rgba(255, 255, 255, 0.1);
        --input-border: rgba(255, 255, 255, 0.1);
        --shadow-color: rgba(34, 211, 238, 0.65);
      }
      
      /* Tema Claro */
      .theme-light {
        --bg-primary: #e1f5fe;
        --bg-secondary: #b3e5fc;
        --bg-tertiary: #81d4fa;
        --text-primary: #263238;
        --text-secondary: #37474f;
        --text-muted: #546e7a;
        --accent-primary: #0277bd;
        --accent-secondary: #ff8f00;
        --card-bg: rgba(255, 255, 255, 0.75);
        --card-border: rgba(2, 119, 189, 0.15);
        --form-bg: rgba(255, 255, 255, 0.85);
        --input-bg: rgba(255, 255, 255, 0.65);
        --input-border: rgba(2, 119, 189, 0.15);
        --shadow-color: rgba(2, 119, 189, 0.2);
      }

      /* Toggle Switch Styles */
      .theme-toggle {
        position: fixed;
        top: 2rem;
        right: 2rem;
        z-index: 1000;
        display: flex;
        align-items: center;
        gap: 0.75rem;
        padding: 0.75rem 1rem;
        background: var(--form-bg);
        border: 1px solid var(--card-border);
        border-radius: 2rem;
        backdrop-filter: blur(20px);
        transition: var(--transition-theme);
        box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
      }

      .toggle-switch {
        position: relative;
        width: 3.5rem;
        height: 1.75rem;
        background: var(--input-bg);
        border: 1px solid var(--input-border);
        border-radius: 1rem;
        cursor: pointer;
        transition: var(--transition-theme);
      }

      .toggle-slider {
        position: absolute;
        top: 2px;
        left: 2px;
        width: 1.5rem;
        height: 1.5rem;
        background: var(--accent-primary);
        border-radius: 50%;
        transition: var(--transition-theme);
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 0.75rem;
        color: white;
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
      }

      .theme-dark .toggle-slider {
        transform: translateX(0);
      }

      .theme-light .toggle-slider {
        transform: translateX(1.75rem);
        background: var(--accent-secondary);
      }

      .toggle-label {
        font-size: 0.75rem;
        font-weight: 600;
        text-transform: uppercase;
        letter-spacing: 0.1em;
        color: var(--text-secondary);
        transition: var(--transition-theme);
      }
      .rounded-sm { border-radius: 0.0625rem !important; }
      .rounded { border-radius: 0.125rem !important; }
      .rounded-md { border-radius: 0.1875rem !important; }
      .rounded-lg { border-radius: 0.25rem !important; }
      .rounded-xl { border-radius: 0.3125rem !important; }
      .rounded-2xl { border-radius: 0.375rem !important; }
      .rounded-3xl { border-radius: 0.5rem !important; }
      .rounded-full { border-radius: 9999px !important; }

      /* Animaciones para modo oscuro */
      @keyframes twinkle {
        0%, 100% { opacity: 0.15; }
        25% { opacity: 0.35; }
        45% { opacity: 0.05; }
        65% { opacity: 0.4; }
        85% { opacity: 0.12; }
      }

      /* Animaciones para modo claro */
      @keyframes float-clouds {
        0%, 100% { transform: translateX(0) translateY(0); opacity: 0.6; }
        25% { transform: translateX(10px) translateY(-5px); opacity: 0.8; }
        50% { transform: translateX(20px) translateY(0); opacity: 0.7; }
        75% { transform: translateX(15px) translateY(5px); opacity: 0.9; }
      }

      @keyframes gentle-glow {
        0%, 100% { opacity: 0.3; filter: blur(20px); }
        50% { opacity: 0.6; filter: blur(15px); }
      }

      /* Efectos de fondo - Modo Oscuro */
      .theme-dark .stars-layer {
        background-image: url("https://www.transparenttextures.com/patterns/stardust.png");
        mix-blend-mode: screen;
        filter: brightness(170%);
        opacity: 0.2;
        animation: twinkle 8s ease-in-out infinite;
        transition: var(--transition-theme);
      }

      .theme-dark .stars-layer.alt-speed {
        animation-duration: 6s;
        opacity: 0.18;
      }

      .theme-dark .stars-layer.slow-speed {
        animation-duration: 11s;
        opacity: 0.22;
      }

      .theme-dark .turquoise-glow {
        background: radial-gradient(circle at 20% 25%, rgba(34, 211, 238, 0.28) 0%, rgba(34, 211, 238, 0.12) 28%, transparent 60%);
        mix-blend-mode: screen;
        transition: var(--transition-theme);
      }

      .theme-dark .amber-glow {
        background: radial-gradient(circle at 78% 72%, rgba(250, 204, 21, 0.18) 0%, rgba(250, 204, 21, 0.08) 32%, transparent 65%);
        mix-blend-mode: screen;
        transition: var(--transition-theme);
      }

      /* Efectos de fondo - Modo Claro */
      .theme-light .stars-layer {
        background-image: url("data:image/svg+xml,%3Csvg width='60' height='60' viewBox='0 0 60 60' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='none' fill-rule='evenodd'%3E%3Cg fill='%23ffffff' fill-opacity='0.25'%3E%3Ccircle cx='9' cy='9' r='2'/%3E%3Ccircle cx='49' cy='29' r='1.5'/%3E%3Ccircle cx='29' cy='49' r='1'/%3E%3C/g%3E%3C/g%3E%3C/svg%3E");
        mix-blend-mode: soft-light;
        filter: brightness(110%);
        opacity: 0.2;
        animation: float-clouds 12s ease-in-out infinite;
        transition: var(--transition-theme);
      }

      .theme-light .stars-layer.alt-speed {
        animation-duration: 10s;
        opacity: 0.25;
      }

      .theme-light .stars-layer.slow-speed {
        animation-duration: 15s;
        opacity: 0.15;
      }

      .theme-light .turquoise-glow {
        background: radial-gradient(circle at 30% 20%, rgba(2, 119, 189, 0.08) 0%, rgba(2, 119, 189, 0.03) 40%, transparent 70%);
        mix-blend-mode: soft-light;
        animation: gentle-glow 8s ease-in-out infinite;
        transition: var(--transition-theme);
      }

      .theme-light .amber-glow {
        background: radial-gradient(circle at 70% 80%, rgba(255, 143, 0, 0.06) 0%, rgba(255, 143, 0, 0.02) 35%, transparent 65%);
        mix-blend-mode: soft-light;
        animation: gentle-glow 10s ease-in-out infinite reverse;
        transition: var(--transition-theme);
      }
      .feature-card {
        border: 1px solid var(--card-border);
        background: var(--card-bg);
        box-shadow: 0 28px 60px -45px var(--shadow-color);
        backdrop-filter: blur(20px);
        transition: var(--transition-theme);
      }

      .theme-dark .feature-card {
        background: linear-gradient(140deg, rgba(34, 211, 238, 0.16) 0%, rgba(20, 31, 68, 0.65) 55%, rgba(47, 91, 164, 0.12) 100%);
      }

      .theme-light .feature-card {
        background: linear-gradient(140deg, rgba(255, 255, 255, 0.8) 0%, rgba(225, 245, 254, 0.7) 55%, rgba(179, 229, 252, 0.5) 100%);
      }

      .form-shell {
        border: 1px solid var(--card-border);
        background: var(--form-bg);
        box-shadow: 0 45px 95px -60px var(--shadow-color);
        backdrop-filter: blur(20px);
        transition: var(--transition-theme);
      }

      .theme-dark .form-shell {
        background: linear-gradient(155deg, rgba(17, 24, 39, 0.9) 0%, rgba(13, 148, 136, 0.12) 52%, rgba(59, 130, 246, 0.35) 100%);
      }

      .theme-light .form-shell {
        background: linear-gradient(155deg, rgba(255, 255, 255, 0.85) 0%, rgba(225, 245, 254, 0.7) 52%, rgba(179, 229, 252, 0.5) 100%);
      }
      .neon-border {
        position: relative;
      }
      .neon-border::before {
        content: "";
        position: absolute;
        inset: 0;
        border-radius: inherit;
        padding: 1px;
        background: linear-gradient(120deg, rgba(34, 211, 238, 0.85), rgba(250, 204, 21, 0.65), rgba(34, 211, 238, 0.95));
        -webkit-mask:
          linear-gradient(#000, #000) content-box,
          linear-gradient(#000, #000);
        mask:
          linear-gradient(#000, #000) content-box,
          linear-gradient(#000, #000);
        -webkit-mask-composite: xor;
        mask-composite: exclude;
        opacity: 0;
        pointer-events: none;
        filter: saturate(0.65);
        transition: opacity 0.55s ease, filter 0.65s ease;
      }
      .neon-border::after {
        content: "";
        position: absolute;
        inset: 0;
        border-radius: inherit;
        box-shadow:
          0 0 20px rgba(34, 211, 238, 0.25),
          0 0 35px rgba(250, 204, 21, 0.15);
        opacity: 0;
        pointer-events: none;
        filter: blur(1.2px);
        transition: opacity 0.55s ease, filter 0.65s ease, box-shadow 0.65s ease;
      }
      .neon-border:hover::before,
      .neon-border:focus-within::before {
        opacity: 1;
        filter: saturate(1.15);
        animation: neonBorderPulse 5.5s ease-in-out infinite;
      }
      .neon-border:hover::after,
      .neon-border:focus-within::after {
        opacity: 0.8;
        filter: blur(0.45px);
        box-shadow:
          0 0 28px rgba(34, 211, 238, 0.45),
          0 0 55px rgba(250, 204, 21, 0.3);
        animation: neonGlow 6s ease-in-out infinite;
      }
      @keyframes neonBorderPulse {
        0%, 100% {
          opacity: 0.65;
          filter: saturate(1);
        }
        40% {
          opacity: 1;
          filter: saturate(1.2);
        }
        70% {
          opacity: 0.8;
          filter: saturate(0.9);
        }
      }
      @keyframes neonGlow {
        0%, 100% {
          opacity: 0.55;
          filter: blur(0px);
        }
        45% {
          opacity: 0.9;
          filter: blur(1.5px);
        }
        70% {
          opacity: 0.7;
          filter: blur(0.5px);
        }
      }
      .btn-icon {
        display: inline-flex;
        align-items: center;
        justify-content: center;
        transition: transform 0.25s ease;
      }
      .btn-icon--active {
        transform: translateY(-1px) scale(1.15);
      }

      /* Estilos adaptativos para textos y elementos */
      .adaptive-text {
        color: var(--text-primary);
        transition: var(--transition-theme);
      }

      .adaptive-text-secondary {
        color: var(--text-secondary);
        transition: var(--transition-theme);
      }

      .adaptive-text-muted {
        color: var(--text-muted);
        transition: var(--transition-theme);
      }

      .adaptive-gradient-text {
        background: linear-gradient(135deg, var(--accent-primary), var(--accent-secondary), var(--accent-primary));
        -webkit-background-clip: text;
        background-clip: text;
        -webkit-text-fill-color: transparent;
        transition: var(--transition-theme);
      }

      .adaptive-border {
        border-color: var(--card-border);
        transition: var(--transition-theme);
      }

      .adaptive-bg {
        background-color: var(--input-bg);
        border-color: var(--input-border);
        color: var(--text-primary);
        transition: var(--transition-theme);
      }

      .adaptive-bg:focus {
        border-color: var(--accent-primary);
        outline: none;
        box-shadow: 0 0 0 2px rgba(var(--accent-primary), 0.2);
      }

      /* Estilos espec√≠ficos para badges */
      .theme-badge {
        border: 1px solid var(--card-border);
        background: var(--input-bg);
        color: var(--text-secondary);
        transition: var(--transition-theme);
      }

      .theme-dark .theme-badge {
        box-shadow: 0 0 25px rgba(34, 211, 238, 0.25);
      }

      .theme-light .theme-badge {
        box-shadow: 0 0 25px rgba(14, 165, 233, 0.15);
      }
    </style>
  </head>
  <body class="min-h-screen transition-all duration-[2000ms] ease-in-out" style="background: linear-gradient(135deg, var(--bg-primary) 0%, var(--bg-secondary) 50%, var(--bg-tertiary) 100%); color: var(--text-primary);">
    
    <!-- Theme Toggle -->
    <div class="theme-toggle">
      <span class="toggle-label">Noche</span>
      <div class="toggle-switch" onclick="toggleTheme()">
        <div class="toggle-slider">
          <span class="theme-icon">üåô</span>
        </div>
      </div>
      <span class="toggle-label">D√≠a</span>
    </div>

    <div class="relative isolate overflow-hidden">
      <!-- Fondo base adaptativo -->
      <div class="absolute inset-0 transition-all duration-[2000ms]" style="background: linear-gradient(135deg, var(--bg-primary) 0%, var(--bg-secondary) 50%, var(--bg-tertiary) 100%);"></div>
      
      <!-- Efectos atmosf√©ricos -->
      <div class="absolute inset-0 turquoise-glow"></div>
      <div class="absolute inset-0 amber-glow"></div>
      <div class="absolute inset-0 stars-layer"></div>
      <div class="absolute inset-0 stars-layer alt-speed"></div>
      <div class="absolute inset-0 stars-layer slow-speed"></div>
      <div class="relative mx-auto flex min-h-screen w-full max-w-6xl flex-col justify-center px-6 py-16 lg:px-12">
        <div class="grid gap-16 lg:grid-cols-[1.1fr_minmax(0,1fr)] lg:items-center">
          <section class="space-y-10 lg:pr-12 xl:pr-16">
            <div class="space-y-4">
              <div class="flex items-center gap-4">
                <img src="{% static 'images/logo-vyc.png' %}" alt="Logo corporativo VyC Ingenier√≠a y Mantenimiento" class="h-16 w-auto drop-shadow-[0_12px_30px_rgba(37,99,235,0.35)]" loading="lazy" />
                <div class="theme-badge inline-flex items-center gap-3 rounded-full px-4 py-1 text-[0.65rem] font-semibold uppercase tracking-[0.35em]">
                  <span class="h-1.5 w-1.5 rounded-full shadow-[0_0_12px_rgba(250,204,21,0.8)]" style="background-color: var(--accent-secondary);"></span>
                  VyC Ingenier√≠a
                </div>
              </div>
              <h1 class="adaptive-gradient-text text-4xl font-bold md:text-5xl">
                Unifica el control de tus operaciones
              </h1>
              <p class="adaptive-text-secondary max-w-xl text-base md:text-lg">
                Organiza &oacute;rdenes, inventario y procesos de taller con un panel que combina
                visibilidad, trazabilidad y acceso r&aacute;pido para tu equipo autorizado.
              </p>
            </div>
            <dl class="grid gap-6 sm:grid-cols-2">
              <div class="feature-card rounded-2xl p-6 backdrop-blur">
                <dt class="adaptive-gradient-text text-sm font-semibold uppercase tracking-[0.2em]">
                  Panel inteligente
                </dt>
                <dd class="adaptive-text-secondary mt-3 text-sm">
                  Visualiza indicadores cr&iacute;ticos y accede a los m&oacute;dulos clave desde un
                  mismo lugar.
                </dd>
              </div>
              <div class="feature-card rounded-2xl p-6 backdrop-blur">
                <dt class="adaptive-gradient-text text-sm font-semibold uppercase tracking-[0.2em]">
                  Accesos seguros
                </dt>
                <dd class="adaptive-text-secondary mt-3 text-sm">
                  Gestor de usuarios y auditor&iacute;a integrados para mantener la operaci&oacute;n
                  bajo control.
                </dd>
              </div>
            </dl>
          </section>
          <section class="form-shell neon-border rounded-3xl backdrop-blur-xl lg:ml-12 xl:ml-16">
            <div class="border-b border-white/10 px-10 py-8 text-center">
              <h2 class="adaptive-gradient-text text-2xl font-semibold">Inicia sesi&oacute;n</h2>
              <div class="mx-auto mt-3 h-px w-16" style="background: linear-gradient(to right, transparent, var(--accent-secondary), transparent);"></div>
              <p class="adaptive-text-muted mt-3 text-sm">
                Usa tus credenciales corporativas para ingresar al Centro de Control.
              </p>
            </div>
            <div class="px-10 py-9">
              {% if form.non_field_errors %}
                <div class="mb-6 rounded-xl border border-red-500/40 bg-red-500/15 px-4 py-3 text-sm text-red-100 shadow-inner">
                  {% for error in form.non_field_errors %}
                    <p>{{ error }}</p>
                  {% endfor %}
                </div>
              {% endif %}
              <form method="post" class="space-y-6">
                {% csrf_token %}
                <div class="space-y-2">
                  <label for="{{ form.username.id_for_label }}" class="adaptive-text-secondary text-xs font-semibold uppercase tracking-[0.25em]">
                    Usuario
                  </label>
                  <div class="relative">
                    <input
                      type="text"
                      name="{{ form.username.name }}"
                      id="{{ form.username.id_for_label }}"
                      value="{{ form.username.value|default_if_none:'' }}"
                      autocomplete="username"
                      required
                      class="adaptive-bg w-full rounded-xl px-4 py-3 text-base shadow-[inset_0_1px_0_rgba(255,255,255,0.08)]"
                      placeholder="Ingresa tu usuario"
                    />
                  </div>
                  {% if form.username.errors %}
                    <p class="text-xs text-red-200">{{ form.username.errors|join:", " }}</p>
                  {% endif %}
                </div>
                <div class="space-y-2">
                  <label for="{{ form.password.id_for_label }}" class="adaptive-text-secondary text-xs font-semibold uppercase tracking-[0.25em]">
                    Contrase&ntilde;a
                  </label>
                  <div class="relative">
                    <input
                      type="password"
                      name="{{ form.password.name }}"
                      id="{{ form.password.id_for_label }}"
                      autocomplete="current-password"
                      required
                      class="adaptive-bg w-full rounded-xl px-4 py-3 text-base shadow-[inset_0_1px_0_rgba(255,255,255,0.08)]"
                      placeholder="Ingresa tu contrase√±a"
                    />
                  </div>
                  {% if form.password.errors %}
                    <p class="text-xs text-red-200">{{ form.password.errors|join:", " }}</p>
                  {% endif %}
                </div>
                {% if form.next.value %}
                  <input type="hidden" name="next" value="{{ form.next.value }}">
                {% endif %}
                <button type="submit" class="btn-3d w-full justify-center text-base uppercase tracking-[0.3em]">
                  <span class="btn-icon" aria-hidden="true" data-icon-default="üîí" data-icon-active="üîì">üîí</span>
                  <span>Ingresar</span>
                </button>
              </form>
            </div>
            <footer class="adaptive-border border-t px-10 py-6 text-center text-sm">
              <span class="adaptive-text-muted">&iquest;No tienes acceso? Solic&iacute;talo al administrador.</span>
            </footer>
          </section>
        </div>
      </div>
    </div>
    <script>
      // Funci√≥n para cambiar el tema
      function toggleTheme() {
        const html = document.documentElement;
        const themeIcon = document.querySelector('.theme-icon');
        const isDark = html.classList.contains('theme-dark');
        
        if (isDark) {
          html.classList.remove('theme-dark');
          html.classList.add('theme-light');
          themeIcon.textContent = '‚òÄÔ∏è';
          localStorage.setItem('theme', 'light');
        } else {
          html.classList.remove('theme-light');
          html.classList.add('theme-dark');
          themeIcon.textContent = 'üåô';
          localStorage.setItem('theme', 'dark');
        }
      }

      document.addEventListener("DOMContentLoaded", () => {
        // Cargar tema guardado
        const savedTheme = localStorage.getItem('theme') || 'dark';
        const html = document.documentElement;
        const themeIcon = document.querySelector('.theme-icon');
        
        if (savedTheme === 'light') {
          html.classList.remove('theme-dark');
          html.classList.add('theme-light');
          themeIcon.textContent = '‚òÄÔ∏è';
        } else {
          html.classList.remove('theme-light');
          html.classList.add('theme-dark');
          themeIcon.textContent = 'üåô';
        }

        // Animaciones de botones
        document.querySelectorAll(".btn-icon[data-icon-active]").forEach((icon) => {
          const button = icon.closest("button");
          if (!button) return;
          button.addEventListener("click", () => {
            icon.textContent = icon.dataset.iconActive;
            icon.classList.add("btn-icon--active");
            setTimeout(() => {
              icon.textContent = icon.dataset.iconDefault;
              icon.classList.remove("btn-icon--active");
            }, 450);
          });
        });

        // Efectos atmosf√©ricos aleatorios
        const layers = document.querySelectorAll(".stars-layer");
        layers.forEach((layer) => {
          const offsetX = Math.floor(Math.random() * 500) - 250;
          const offsetY = Math.floor(Math.random() * 500) - 250;
          layer.style.backgroundPosition = `${offsetX}px ${offsetY}px`;
          const delay = -1 * (Math.random() * 4 + 1);
          layer.style.animationDelay = `${delay.toFixed(2)}s`;
        });
      });
    </script>
  </body>
